# çƒé˜Ÿç®¡ç†å°ç¨‹åºå¼€å‘è®¡åˆ’

## é¡¹ç›®æ¦‚è¿°
å¼€å‘ä¸€ä¸ªåŸç”Ÿå¾®ä¿¡å°ç¨‹åºï¼Œç”¨äºå•ä¸€çƒé˜Ÿçš„ä¿¡æ¯ç®¡ç†ã€æ•°æ®è®°å½•å’Œå¯è§†åŒ–å±•ç¤ºã€‚

## æŠ€æœ¯é€‰å‹
- **æ¡†æ¶**: åŸç”Ÿå¾®ä¿¡å°ç¨‹åº
- **åç«¯**: å¾®ä¿¡äº‘å¼€å‘ï¼ˆäº‘æ•°æ®åº“ã€äº‘å‡½æ•°ï¼‰
- **å›¾è¡¨**: Canvasè‡ªç»˜

## ä¸€ã€æ•°æ®åº“è®¾è®¡ï¼ˆäº‘æ•°æ®åº“ï¼‰

### 1. playersï¼ˆçƒå‘˜è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| _id | string | çƒå‘˜ID |
| name | string | çƒå‘˜å§“å |
| number | number | çƒè¡£å·ç  |
| position | string | ä½ç½®ï¼ˆå‰é”‹/ä¸­åœº/åå«/é—¨å°†ï¼‰ |
| phone | string | è”ç³»æ–¹å¼ |
| avatar | string | å¤´åƒURL |
| joinDate | date | åŠ å…¥æ—¥æœŸ |
| isActive | boolean | æ˜¯å¦åœ¨èŒ |
| tags | array | çƒå‘˜æ ‡ç­¾ï¼ˆå¦‚ï¼šé˜Ÿé•¿ã€æ ¸å¿ƒã€æ½œåŠ›æ–°æ˜Ÿç­‰ï¼‰ |
| ability | object | èƒ½åŠ›å€¼ |
| - power | number | åŠ›é‡ (1-100) |
| - stamina | number | ä½“èƒ½ (1-100) |
| - shooting | number | å°„é—¨ (1-100) |
| - dribbling | number | ç›˜å¸¦ (1-100) |
| - technique | number | æŠ€å·§ (1-100) |
| - iq | number | çƒå•† (1-100) |
| createTime | date | åˆ›å»ºæ—¶é—´ |

### 2. matchesï¼ˆæ¯”èµ›è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| _id | string | æ¯”èµ›ID |
| opponent | string | å¯¹æ‰‹åç§° |
| matchDate | date | æ¯”èµ›æ—¥æœŸ |
| isHome | boolean | æ˜¯å¦ä¸»åœº |
| goals | number | è¿›çƒæ•° |
| conceded | number | å¤±çƒæ•° |
| result | string | ç»“æœï¼ˆèƒœ/è´Ÿ/å¹³ï¼‰ |
| location | string | æ¯”èµ›åœ°ç‚¹ |
| notes | string | å¤‡æ³¨ |
| createTime | date | åˆ›å»ºæ—¶é—´ |

### 3. match_recordsï¼ˆæ¯”èµ›è®°å½•æ˜ç»†ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| _id | string | è®°å½•ID |
| matchId | string | å…³è”æ¯”èµ›ID |
| playerId | string | å…³è”çƒå‘˜ID |
| goals | number | è¿›çƒæ•° |
| assists | number | åŠ©æ”»æ•° |
| yellowCard | number | é»„ç‰Œæ•° |
| redCard | number | çº¢ç‰Œæ•° |
| rating | number | è¯„åˆ†(1-10) |
| position | string | æœ¬åœºä½ç½® |

### 4. attendanceï¼ˆå‡ºå‹¤è®°å½•ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| _id | string | è®°å½•ID |
| playerId | string | å…³è”çƒå‘˜ID |
| eventType | string | ç±»å‹ï¼ˆè®­ç»ƒ/æ¯”èµ›ï¼‰ |
| eventDate | date | æ´»åŠ¨æ—¥æœŸ |
| status | string | çŠ¶æ€ï¼ˆå‡ºå‹¤/è¯·å‡/ç¼ºå‹¤ï¼‰ |
| reason | string | è¯·å‡åŸå›  |

### 5. usersï¼ˆç”¨æˆ·è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| _id | string | ç”¨æˆ·ID(openid) |
| role | string | è§’è‰²ï¼ˆadmin/userï¼‰ |
| name | string | ç”¨æˆ·åç§° |
| playerId | string | å…³è”çƒå‘˜ID |

### 6. schedulesï¼ˆæ—¥ç¨‹è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| _id | string | æ—¥ç¨‹ID |
| title | string | æ ‡é¢˜ |
| date | date | æ—¥æœŸ |
| type | string | ç±»å‹ï¼ˆè®­ç»ƒ/æ¯”èµ›/ä¼šè®®ï¼‰ |
| location | string | åœ°ç‚¹ |
| description | string | æè¿° |
| reminder | boolean | æ˜¯å¦æé†’ |

---

## äºŒã€é¡¹ç›®ç»“æ„

```
miniprogram/
â”œâ”€â”€ app.js
â”œâ”€â”€ app.json
â”œâ”€â”€ app.wxss
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ player-card/        # çƒå‘˜å¡ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ match-card/         # æ¯”èµ›å¡ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ calendar/           # æ—¥å†ç»„ä»¶
â”‚   â”œâ”€â”€ data-chart/         # å›¾è¡¨ç»„ä»¶ï¼ˆCanvasï¼‰
â”‚   â””â”€â”€ stat-card/          # ç»Ÿè®¡æ•°æ®å¡ç‰‡
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index/              # é¦–é¡µï¼ˆæ¦‚è§ˆç»Ÿè®¡ï¼‰
â”‚   â”œâ”€â”€ players/            # çƒå‘˜åˆ—è¡¨
â”‚   â”œâ”€â”€ player-detail/      # çƒå‘˜è¯¦æƒ…
â”‚   â”œâ”€â”€ player-form/        # çƒå‘˜å½•å…¥/ç¼–è¾‘
â”‚   â”œâ”€â”€ matches/            # æ¯”èµ›åˆ—è¡¨
â”‚   â”œâ”€â”€ match-detail/       # æ¯”èµ›è¯¦æƒ…
â”‚   â”œâ”€â”€ match-form/         # æ¯”èµ›å½•å…¥/ç¼–è¾‘
â”‚   â”œâ”€â”€ record-form/        # æ¯”èµ›è®°å½•å½•å…¥
â”‚   â”œâ”€â”€ attendance/         # å‡ºå‹¤ç®¡ç†
â”‚   â”œâ”€â”€ schedule/           # æ—¥å†æ—¥ç¨‹
â”‚   â”œâ”€â”€ stats/              # æ•°æ®ç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ goals/          # è¿›çƒæ¦œ
â”‚   â”‚   â”œâ”€â”€ assists/        # åŠ©æ”»æ¦œ
â”‚   â”‚   â””â”€â”€ attendance/     # å‡ºå‹¤æ¦œ
â”‚   â””â”€â”€ profile/            # ä¸ªäººä¸­å¿ƒ
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ util.js             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ chart.js            # Canvaså›¾è¡¨ç»˜åˆ¶å·¥å…·
â”‚   â”œâ”€â”€ date.js             # æ—¥æœŸå¤„ç†å·¥å…·
â”‚   â””â”€â”€ constants.js        # å¸¸é‡å®šä¹‰
â””â”€â”€ images/                 # å›¾ç‰‡èµ„æº
```

---

## ä¸‰ã€é¡µé¢è§„åˆ’ä¸åŠŸèƒ½

### 3.1 é¦–é¡µ (pages/index)
- çƒé˜Ÿæ€»è§ˆç»Ÿè®¡ï¼ˆçƒå‘˜æ•°ã€æ¯”èµ›æ•°ã€è¿›çƒæ•°ï¼‰
- æœ€è¿‘æ¯”èµ›åˆ—è¡¨ï¼ˆæœ€è¿‘5åœºï¼‰
- å³å°†åˆ°æ¥çš„èµ›ç¨‹
- å¿«æ·å…¥å£

### 3.2 çƒå‘˜ç®¡ç†
| é¡µé¢ | åŠŸèƒ½ |
|------|------|
| players | çƒå‘˜åˆ—è¡¨ã€æœç´¢ã€ç­›é€‰ |
| player-detail | ä¸ªäººä¿¡æ¯ã€èƒ½åŠ›å€¼é›·è¾¾å›¾ã€æ ‡ç­¾å±•ç¤ºã€æ¯”èµ›è®°å½•ã€å‡ºå‹¤ç»Ÿè®¡ |
| player-form | æ–°å¢/ç¼–è¾‘çƒå‘˜ä¿¡æ¯ã€å½•å…¥èƒ½åŠ›å€¼ã€é€‰æ‹©æ ‡ç­¾ |

### 3.3 æ¯”èµ›ç®¡ç†
| é¡µé¢ | åŠŸèƒ½ |
|------|------|
| matches | æ¯”èµ›åˆ—è¡¨ã€èµ›å­£ç­›é€‰ |
| match-detail | æ¯”èµ›è¯¦æƒ…ã€çƒå‘˜è¡¨ç°æ•°æ® |
| match-form | æ–°å¢/ç¼–è¾‘æ¯”èµ›ä¿¡æ¯ |
| record-form | å½•å…¥çƒå‘˜æ¯”èµ›æ•°æ®ï¼ˆè¿›çƒã€åŠ©æ”»ç­‰ï¼‰ |

### 3.4 å‡ºå‹¤ç®¡ç†
| é¡µé¢ | åŠŸèƒ½ |
|------|------|
| attendance | å‡ºå‹¤è®°å½•åˆ—è¡¨ã€æ·»åŠ å‡ºå‹¤è®°å½• |

### 3.5 æ—¥å†æ—¥ç¨‹ (pages/schedule)
- æœˆå†è§†å›¾å±•ç¤ºè®­ç»ƒå’Œæ¯”èµ›
- ç‚¹å‡»æ—¥æœŸæŸ¥çœ‹è¯¦æƒ…
- æ·»åŠ /ç¼–è¾‘æ—¥ç¨‹ï¼ˆç®¡ç†å‘˜ï¼‰

### 3.6 æ•°æ®ç»Ÿè®¡ (pages/stats)
| é¡µé¢ | å±•ç¤ºæ–¹å¼ |
|------|----------|
| goals | Canvasæ¨ªå‘æŸ±çŠ¶å›¾ï¼ˆè¿›çƒæ¦œTOP10ï¼‰ |
| assists | Canvasæ¨ªå‘æŸ±çŠ¶å›¾ï¼ˆåŠ©æ”»æ¦œTOP10ï¼‰ |
| attendance | Canvasé¥¼å›¾/æŸ±çŠ¶å›¾ï¼ˆå‡ºå‹¤ç‡æ’åï¼‰ |

### 3.7 ä¸ªäººä¸­å¿ƒ (pages/profile)
- ç”¨æˆ·ä¿¡æ¯å±•ç¤º
- è§’è‰²æ˜¾ç¤ºï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
- é€€å‡ºç™»å½•

---

## å››ã€æƒé™ç®¡ç†

### è§’è‰²å®šä¹‰
| è§’è‰² | æƒé™ |
|------|------|
| admin | æ‰€æœ‰æ•°æ®çš„å¢åˆ æ”¹æŸ¥ |
| user | ä»…æŸ¥çœ‹æ•°æ®ï¼Œæ— æ³•ä¿®æ”¹ |

### å®ç°æ–¹æ¡ˆ
1. äº‘å‡½æ•° `login` è·å–ç”¨æˆ·ä¿¡æ¯å¹¶åˆ›å»º/æ›´æ–°ç”¨æˆ·è®°å½•
2. äº‘æ•°æ®åº“ `users` è¡¨å­˜å‚¨ç”¨æˆ·è§’è‰²
3. å°ç¨‹åºç«¯æ ¹æ® role åŠ¨æ€æ˜¾ç¤ºç¼–è¾‘æŒ‰é’®
4. äº‘å‡½æ•°ç«¯å¯¹å†™æ“ä½œè¿›è¡Œæƒé™æ ¡éªŒ

---

## äº”ã€Canvaså›¾è¡¨è®¾è®¡

### 5.1 è¿›çƒæ¦œ/åŠ©æ”»æ¦œï¼ˆæ¨ªå‘æŸ±çŠ¶å›¾ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼ ä¸‰   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  15çƒ                  â”‚
â”‚ æå››   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        10çƒ                  â”‚
â”‚ ç‹äº”   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ            8çƒ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å‡ºå‹¤ç‡ï¼ˆé¥¼å›¾/ç¯å½¢å›¾ï¼‰
```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â•±           â•²
  â”‚   95%      â”‚  å‡ºå‹¤ç‡
   â•²           â•±
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 èƒ½åŠ›å€¼é›·è¾¾å›¾
```
        å°„é—¨
           â”‚
           â—
      â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€
           â”‚
    ç›˜å¸¦â”€â”€â”€â”¼â”€â”€â”€åŠ›é‡
           â”‚
           â—
        ä½“èƒ½
```

### 5.4 èµ›ç¨‹æ—¥å†
- æœˆå†ç½‘æ ¼æ˜¾ç¤º
- ä¸åŒé¢œè‰²åŒºåˆ†è®­ç»ƒï¼ˆè“è‰²ï¼‰å’Œæ¯”èµ›ï¼ˆç»¿è‰²ï¼‰
- ç‚¹å‡»æ˜¾ç¤ºè¯¦æƒ…

---

## å…­ã€äº‘å‡½æ•°è§„åˆ’

| äº‘å‡½æ•° | ç”¨é€” |
|--------|------|
| login | ç”¨æˆ·ç™»å½•ã€è§’è‰²è·å– |
| getPlayers | è·å–çƒå‘˜åˆ—è¡¨ |
| createPlayer | åˆ›å»ºçƒå‘˜ |
| updatePlayer | æ›´æ–°çƒå‘˜ |
| deletePlayer | åˆ é™¤çƒå‘˜ |
| getMatches | è·å–æ¯”èµ›åˆ—è¡¨ |
| createMatch | åˆ›å»ºæ¯”èµ› |
| updateMatch | æ›´æ–°æ¯”èµ› |
| deleteMatch | åˆ é™¤æ¯”èµ› |
| getMatchRecords | è·å–æ¯”èµ›è®°å½• |
| saveMatchRecord | ä¿å­˜çƒå‘˜æ¯”èµ›æ•°æ® |
| getAttendance | è·å–å‡ºå‹¤è®°å½• |
| saveAttendance | è®°å½•å‡ºå‹¤ |
| getStats | è·å–ç»Ÿè®¡æ•°æ® |
| getSchedule | è·å–æ—¥ç¨‹ |

---

## ä¸ƒã€å¼€å‘é‡Œç¨‹ç¢‘

### Phase 1: é¡¹ç›®åŸºç¡€
- [x] åˆ›å»ºå°ç¨‹åºé¡¹ç›®
- [x] é…ç½®äº‘å¼€å‘ç¯å¢ƒ
- [x] åˆ›å»ºæ•°æ®åº“é›†åˆ

### Phase 2: çƒå‘˜ç®¡ç†
- [x] å®ç°çƒå‘˜åˆ—è¡¨é¡µé¢
- [x] å®ç°çƒå‘˜è¯¦æƒ…é¡µé¢ï¼ˆåŒ…å«èƒ½åŠ›å€¼é›·è¾¾å›¾ã€æ ‡ç­¾å±•ç¤ºï¼‰
- [x] å®ç°çƒå‘˜å½•å…¥/ç¼–è¾‘åŠŸèƒ½ï¼ˆåŒ…å«èƒ½åŠ›å€¼å½•å…¥ã€æ ‡ç­¾é€‰æ‹©ï¼‰
- [x] æƒé™æ§åˆ¶ï¼ˆç®¡ç†å‘˜å¯ç¼–è¾‘ï¼‰

### Phase 3: æ¯”èµ›ç®¡ç†
- [x] å®ç°æ¯”èµ›åˆ—è¡¨é¡µé¢
- [x] å®ç°æ¯”èµ›è¯¦æƒ…é¡µé¢
- [x] å®ç°æ¯”èµ›å½•å…¥åŠŸèƒ½
- [x] å®ç°çƒå‘˜æ¯”èµ›æ•°æ®å½•å…¥ï¼ˆè¿›çƒã€åŠ©æ”»ï¼‰

### Phase 4: å‡ºå‹¤ç®¡ç†
- [x] å®ç°å‡ºå‹¤è®°å½•åŠŸèƒ½
- [x] å‡ºå‹¤ç»Ÿè®¡å±•ç¤º

### Phase 5: æ—¥å†æ—¥ç¨‹
- [x] å®ç°æ—¥å†ç»„ä»¶
- [x] å®ç°æ—¥ç¨‹ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰

### Phase 6: æ•°æ®å¯è§†åŒ–
- [x] å®ç°è¿›çƒæ¦œCanvaså›¾è¡¨
- [x] å®ç°åŠ©æ”»æ¦œCanvaså›¾è¡¨
- [x] å®ç°å‡ºå‹¤æ¦œCanvaså›¾è¡¨
- [x] å®ç°çƒå‘˜èƒ½åŠ›å€¼é›·è¾¾å›¾

### Phase 7: ä¼˜åŒ–å®Œå–„
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤º
- [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
- [ ] æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

---

## å…«ã€å…³é”®æ–‡ä»¶è·¯å¾„

| æ–‡ä»¶ | è·¯å¾„ |
|------|------|
| æ•°æ®åº“é…ç½® | `project.config.json` |
| å…¨å±€æ ·å¼ | `app.wxss` |
| å›¾è¡¨å·¥å…· | `utils/chart.js` |
| äº‘å‡½æ•°ç›®å½• | `cloudfunctions/` |

---

## ä¹ã€çƒå‘˜èƒ½åŠ›å€¼è®¾è®¡

### èƒ½åŠ›å€¼ç±»å‹
| èƒ½åŠ› | å›¾æ ‡ | è¯´æ˜ |
|------|------|------|
| åŠ›é‡ | ğŸ’ª | èº«ä½“å¯¹æŠ—èƒ½åŠ› |
| ä½“èƒ½ | âš¡ | è€åŠ›å’ŒæŒä¹…åŠ› |
| å°„é—¨ | âš½ | å°„é—¨å‡†ç¡®æ€§å’ŒåŠ›é‡ |
| ç›˜å¸¦ | ğŸƒ | å¸¦çƒçªç ´èƒ½åŠ› |
| æŠ€å·§ | ğŸ¯ | æ§çƒå’ŒæŠ€æœ¯èƒ½åŠ› |
| çƒå•† | ğŸ§  | æˆ˜æœ¯æ„è¯†å’Œå†³ç­–èƒ½åŠ› |

### èƒ½åŠ›å€¼æ ‡ç­¾
| æ ‡ç­¾ | è¯´æ˜ |
|------|------|
| é˜Ÿé•¿ | çƒé˜Ÿé¢†å¯¼è€… |
| å‰¯é˜Ÿé•¿ | å‰¯é˜Ÿé•¿ |
| æ ¸å¿ƒçƒå‘˜ | çƒé˜Ÿæ ¸å¿ƒæˆå‘˜ |
| æ›¿è¡¥ | æ›¿è¡¥çƒå‘˜ |
| æ–°æ˜Ÿ | å¹´è½»æœ‰æ½œåŠ›çš„çƒå‘˜ |
| è€å°† | ç»éªŒä¸°å¯Œçš„çƒå‘˜ |
| å°„æ‰‹ | è¿›çƒèƒ½åŠ›å¼ºçš„çƒå‘˜ |
| åŠ©æ”»ç‹ | åŠ©æ”»èƒ½åŠ›å¼ºçš„çƒå‘˜ |
| ç²¾ç¥é¢†è¢– | ç²¾ç¥æ”¯æŸ± |

---

## åã€éªŒè¯è®¡åˆ’

1. **ç¯å¢ƒéªŒè¯**: åˆ›å»ºäº‘å¼€å‘ç¯å¢ƒå¹¶æµ‹è¯•æ•°æ®åº“è¿æ¥
2. **åŠŸèƒ½æµ‹è¯•**:
   - ç®¡ç†å‘˜å¯åˆ›å»ºçƒå‘˜å¹¶å½•å…¥èƒ½åŠ›å€¼å’Œæ ‡ç­¾
   - ç®¡ç†å‘˜å¯åˆ›å»ºæ¯”èµ›å¹¶å½•å…¥æ•°æ®
   - æ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹æ•°æ®
   - Canvaså›¾è¡¨æ­£ç¡®æ˜¾ç¤ºæ•°æ®
   - æ—¥å†æ­£ç¡®æ˜¾ç¤ºèµ›ç¨‹
   - èƒ½åŠ›å€¼é›·è¾¾å›¾æ­£ç¡®å±•ç¤º
3. **æ€§èƒ½æµ‹è¯•**: é¡µé¢åŠ è½½é€Ÿåº¦ã€æ•°æ®æ¸²æŸ“æ•ˆç‡
