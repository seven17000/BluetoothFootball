<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">çƒå‘˜åˆ—è¡¨</text>
  </view>

  <!-- æœç´¢æ¡† -->
  <view class="search-box">
    <text class="search-icon">ğŸ”</text>
    <input class="search-input" placeholder="æœç´¢çƒå‘˜å§“å/å·ç " bindinput="onSearch" value="{{keyword}}"/>
  </view>

  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="filter-item {{position === '' ? 'active' : ''}}" bindtap="filterByPosition" data-position="">å…¨éƒ¨</view>
    <view class="filter-item {{position === 'å‰é”‹' ? 'active' : ''}}" bindtap="filterByPosition" data-position="å‰é”‹">å‰é”‹</view>
    <view class="filter-item {{position === 'ä¸­åœº' ? 'active' : ''}}" bindtap="filterByPosition" data-position="ä¸­åœº">ä¸­åœº</view>
    <view class="filter-item {{position === 'åå«' ? 'active' : ''}}" bindtap="filterByPosition" data-position="åå«">åå«</view>
    <view class="filter-item {{position === 'é—¨å°†' ? 'active' : ''}}" bindtap="filterByPosition" data-position="é—¨å°†">é—¨å°†</view>
  </view>

  <!-- çƒå‘˜åˆ—è¡¨ -->
  <view class="player-list" wx:if="{{players.length > 0}}">
    <view class="player-item" wx:for="{{players}}" wx:key="_id" bindtap="goToDetail" data-id="{{item._id}}">
      <view class="player-avatar">
        <image wx:if="{{item.avatar || item.photo || item.image}}" src="{{item.avatar || item.photo || item.image}}" mode="aspectFill" class="avatar-img"></image>
        <view wx:else class="avatar-text" style="background: {{item.avatarColor || '#667eea'}}">{{item.number}}</view>
      </view>
      <view class="player-info">
        <view class="player-name-row">
          <text class="player-name">{{item.name}}</text>
          <text class="player-number-inline">{{item.number}}å·</text>
        </view>
        <text class="player-position">{{item.position.join(' Â· ')}}</text>
      </view>
      <view class="player-tags" wx:if="{{item.tags && item.tags.length > 0}}">
        <text class="tag" wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this">{{tag}}</text>
      </view>
      <text class="player-arrow">></text>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="loading-tip" wx:if="{{hasMore}}">
      <text wx:if="{{isLoadingMore}}">åŠ è½½ä¸­...</text>
      <text wx:else>ä¸Šæ‹‰åŠ è½½æ›´å¤š</text>
    </view>
    <view class="loading-tip" wx:if="{{!hasMore && players.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <text class="empty-icon">âš½</text>
    <text class="empty-text">æš‚æ— çƒå‘˜æ•°æ®</text>
    <button class="btn btn-primary mt-20" bindtap="addPlayer" wx:if="{{isAdmin}}">æ·»åŠ çƒå‘˜</button>
  </view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="fab" bindtap="addPlayer" wx:if="{{isAdmin}}">
    <text class="fab-icon">+</text>
  </view>
</view>
