<view class="container">
  <!-- 头像区域 -->
  <view class="avatar-section" bindtap="chooseAvatar">
    <view class="avatar-wrapper">
      <image class="avatar-img" src="{{formData.avatar || userInfo.avatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="avatar-edit-badge">编辑</view>
    </view>
    <text class="avatar-hint">点击更换头像</text>
  </view>

  <!-- 基本信息 -->
  <view class="card">
    <view class="card-title">基本信息</view>

    <view class="form-item">
      <text class="label">昵称</text>
      <input class="input" placeholder="请输入昵称" value="{{formData.name}}" bindinput="onNameInput"/>
    </view>

    <view class="form-item">
      <text class="label">角色</text>
      <text class="value">{{userInfo.role === 'admin' ? '管理员' : '普通用户'}}</text>
    </view>

    <view class="form-item">
      <text class="label">注册时间</text>
      <text class="value">{{formatTime(userInfo.createTime)}}</text>
    </view>
  </view>

  <!-- 个人简介 -->
  <view class="card">
    <view class="card-title">个人简介</view>
    <textarea
      class="bio-textarea"
      placeholder="介绍一下自己吧..."
      value="{{formData.bio}}"
      bindinput="onBioInput"
      maxlength="200"
    ></textarea>
    <view class="bio-count">{{formData.bio.length || 0}}/200</view>
  </view>

  <!-- 保存按钮 -->
  <view class="btn-container">
    <button class="btn btn-primary btn-block" bindtap="saveProfile" loading="{{saving}}">保存修改</button>
  </view>
</view>
