<view class="container">
  <!-- 赛季选择 -->
  <view class="season-selector" wx:if="{{hasSeasonSelector}}">
    <picker mode="selector" range="{{seasons}}" bindchange="onSeasonChange">
      <view class="season-picker">
        <text class="season-label">赛季：</text>
        <text class="season-value">{{selectedSeason}}</text>
        <text class="season-arrow">▼</text>
      </view>
    </picker>
  </view>

  <!-- 比赛列表 -->
  <view class="card" wx:if="{{matches.length > 0}}">
    <view class="match-list">
      <view class="match-item" wx:for="{{matches}}" wx:key="_id" bindtap="goToDetail" data-id="{{item._id}}">
        <view class="match-row-1">
          <view class="match-team">蓝牙</view>
          <view class="match-result-capsule {{item.resultClass}}">{{item.goals}}-{{item.conceded}} {{item.result}}</view>
          <view class="match-opponent">{{item.opponent}}</view>
        </view>
        <view class="match-row-2">
          <view class="match-jersey-left" wx:if="{{item.jerseyColor}}">球衣：{{item.jerseyColor}}</view>
          <view class="match-datetime">
            <text>{{item.month}}月{{item.day}}日</text>
            <text>{{item.isHome ? '主场' : '客场'}}</text>
            <text wx:if="{{item.location}}">{{item.location}}</text>
          </view>
          <view class="match-jersey-right" wx:if="{{item.opponentJersey}}">球衣：{{item.opponentJersey}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="card" wx:else>
    <view class="empty-state">
      <text class="empty-text">暂无已完成的比赛记录</text>
      <text class="empty-tip">比赛结束后请在比赛详情中录入比分</text>
      <button class="btn btn-primary mt-20" bindtap="addMatch" wx:if="{{isAdmin}}">添加比赛记录</button>
    </view>
  </view>

  <!-- 加载更多提示 -->
  <view class="loading-tip" wx:if="{{hasMore}}">
    <text wx:if="{{isLoading}}">加载中...</text>
    <text wx:else>上拉加载更多</text>
  </view>
  <view class="loading-tip" wx:if="{{!hasMore && matches.length > 0}}">
    <text>没有更多了</text>
  </view>

  <!-- 添加按钮 -->
  <view class="fab" bindtap="addMatch" wx:if="{{isAdmin}}">
    <text>+</text>
  </view>
</view>
