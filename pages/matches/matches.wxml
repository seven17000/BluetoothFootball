<view class="container">
  <!-- 月份范围筛选 -->
  <view class="date-filter">
    <view class="filter-row">
      <text class="filter-label">开始时间</text>
      <view class="filter-pickers">
        <picker mode="selector" range="{{years}}" bindchange="onStartYearChange">
          <view class="picker">
            <text>{{startYear}}年</text>
            <text class="arrow">▼</text>
          </view>
        </picker>
        <picker mode="selector" range="{{months}}" bindchange="onStartMonthChange">
          <view class="picker">
            <text>{{startMonth}}月</text>
            <text class="arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>
    <view class="filter-row">
      <text class="filter-label">结束时间</text>
      <view class="filter-pickers">
        <picker mode="selector" range="{{years}}" bindchange="onEndYearChange">
          <view class="picker">
            <text>{{endYear}}年</text>
            <text class="arrow">▼</text>
          </view>
        </picker>
        <picker mode="selector" range="{{months}}" bindchange="onEndMonthChange">
          <view class="picker">
            <text>{{endMonth}}月</text>
            <text class="arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>
  </view>

  <!-- 统计概览 -->
  <view class="stats-row">
    <view class="stat-item">
      <text class="value">{{stats.wins}}</text>
      <text class="label">胜</text>
    </view>
    <view class="stat-item">
      <text class="value">{{stats.draws}}</text>
      <text class="label">平</text>
    </view>
    <view class="stat-item">
      <text class="value">{{stats.losses}}</text>
      <text class="label">负</text>
    </view>
    <view class="stat-item">
      <text class="value {{stats.goalDiff >= 0 ? 'positive' : 'negative'}}">{{stats.goalDiff >= 0 ? '+' : ''}}{{stats.goalDiff}}</text>
      <text class="label">净胜球</text>
    </view>
  </view>

  <!-- 比赛列表 -->
  <view class="match-list" wx:if="{{matches.length > 0}}">
    <view class="match-item" wx:for="{{matches}}" wx:key="_id" bindtap="goToDetail" data-id="{{item._id}}">
      <view class="match-date-box">
        <text class="month">{{item.month}}月</text>
        <text class="day">{{item.day}}</text>
      </view>
      <view class="match-content">
        <view class="match-header">
          <text class="opponent">{{item.opponent}}</text>
          <text class="result {{item.resultClass}}">{{item.result}}</text>
        </view>
        <view class="match-info">
          <text class="score">{{item.goals}} - {{item.conceded}}</text>
          <text class="location">{{item.isHome ? '主场' : '客场'}} | {{item.location || '未设置场地'}}</text>
        </view>
      </view>
      <view class="match-arrow">></view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:else>
    <text class="empty-text">暂无比赛记录</text>
    <button class="btn btn-primary mt-20" bindtap="addMatch" wx:if="{{isAdmin}}">添加比赛</button>
  </view>

  <!-- 添加按钮 -->
  <view class="fab" bindtap="addMatch" wx:if="{{isAdmin}}">
    <text>+</text>
  </view>
</view>
