<view class="container">
  <!-- 统计类型切换 -->
  <view class="tab-bar">
    <view class="tab-item {{currentTab === 'goals' ? 'active' : ''}}" bindtap="switchTab" data-tab="goals">进球榜</view>
    <view class="tab-item {{currentTab === 'assists' ? 'active' : ''}}" bindtap="switchTab" data-tab="assists">助攻榜</view>
  </view>

  <!-- 月份范围筛选 -->
  <view class="date-filter">
    <view class="filter-row">
      <text class="filter-label">开始时间</text>
      <view class="filter-pickers">
        <picker mode="selector" range="{{years}}" bindchange="onStartYearChange">
          <view class="picker">
            <text>{{startYear}}年</text>
            <text class="arrow">▼</text>
          </view>
        </picker>
        <picker mode="selector" range="{{months}}" bindchange="onStartMonthChange">
          <view class="picker">
            <text>{{startMonth}}月</text>
            <text class="arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>
    <view class="filter-row">
      <text class="filter-label">结束时间</text>
      <view class="filter-pickers">
        <picker mode="selector" range="{{years}}" bindchange="onEndYearChange">
          <view class="picker">
            <text>{{endYear}}年</text>
            <text class="arrow">▼</text>
          </view>
        </picker>
        <picker mode="selector" range="{{months}}" bindchange="onEndMonthChange">
          <view class="picker">
            <text>{{endMonth}}月</text>
            <text class="arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>
  </view>

  <!-- 图表展示 -->
  <view class="card chart-card">
    <view class="card-title">{{chartTitle}}</view>
    <canvas canvas-id="barChart" id="barChart" class="chart-canvas"></canvas>
  </view>

  <!-- 排行榜列表 -->
  <view class="card">
    <view class="card-title">详细排名</view>
    <view class="rank-list" wx:if="{{rankList.length > 0}}">
      <view class="rank-item" wx:for="{{rankList}}" wx:key="playerId">
        <view class="rank-num {{index < 3 ? 'top-' + (index + 1) : ''}}">{{index + 1}}</view>
        <view class="rank-info">
          <text class="player-name">{{item.name}}</text>
          <text class="player-position">{{item.position}}</text>
        </view>
        <view class="rank-value">
          <text class="value">{{item.value}}</text>
          <text class="unit">{{currentTab === 'goals' ? '球' : '助攻'}}</text>
        </view>
      </view>
    </view>
    <view class="empty-text" wx:else>
      暂无数据
    </view>
  </view>

  <!-- 统计摘要 -->
  <view class="card summary-card">
    <view class="summary-title">数据统计</view>
    <view class="summary-stats">
      <view class="summary-item">
        <text class="value">{{summary.total}}</text>
        <text class="label">总{{currentTab === 'goals' ? '进球' : '助攻'}}</text>
      </view>
      <view class="summary-item">
        <text class="value">{{summary.avg}}</text>
        <text class="label">场均</text>
      </view>
      <view class="summary-item">
        <text class="value">{{summary.topPlayer}}</text>
        <text class="label">榜首</text>
      </view>
    </view>
  </view>
</view>
