<view class="container">
  <!-- 统计概览 -->
  <view class="stats-bar">
    <view class="stat-item">
      <text class="stat-value">{{teamDays}}</text>
      <text class="stat-label">球队成立天数</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{playerCount}}</text>
      <text class="stat-label">球员数量</text>
    </view>
  </view>

  <!-- 暂无数据提示 -->
  <view class="card" wx:if="{{playerCount === 0 && isAdmin}}">
    <view class="empty-state">
      <text class="empty-title">欢迎使用球队管理</text>
      <text class="empty-desc">请先添加球员和比赛数据</text>
      <view class="empty-steps">
        <text>1. 进入"球员"页面添加球员</text>
        <text>2. 进入"数据"页面添加比赛</text>
        <text>3. 在比赛详情中录入球员数据</text>
      </view>
    </view>
  </view>

  <!-- 最近比赛 -->
  <view class="card">
    <view class="card-header">
      <text class="title">最近比赛</text>
      <view class="more" bindtap="goToMatches">查看更多 ></view>
    </view>
    <view class="match-list" wx:if="{{recentMatches.length > 0}}">
      <view class="match-item" wx:for="{{recentMatches}}" wx:key="_id" bindtap="goToMatchDetail" data-id="{{item._id}}">
        <view class="match-date">
          <text class="date-day">{{item.day}}</text>
          <text class="date-month">{{item.month}}月</text>
        </view>
        <view class="match-info">
          <view class="match-opponent">
            <text class="vs">VS</text>
            <text>{{item.opponent}}</text>
          </view>
          <view class="match-result">
            <text class="score">{{item.goals}}-{{item.conceded}}</text>
            <text class="result-tag {{item.resultClass}}">{{item.result}}</text>
          </view>
        </view>
        <view class="match-location">
          <text>{{item.isHome ? '主场' : '客场'}}</text>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <text>暂无比赛记录</text>
      <button class="btn btn-primary mt-20" bindtap="addMatch" wx:if="{{isAdmin}}">添加比赛</button>
    </view>
  </view>

  <!-- 射手榜TOP3 -->
  <view class="card" wx:if="{{topScorers.length > 0}}">
    <view class="card-header">
      <text class="title">射手榜 TOP3</text>
      <view class="more" bindtap="goToStats">查看更多 ></view>
    </view>
    <view class="top-scorer-list">
      <view class="scorer-item" wx:for="{{topScorers}}" wx:key="index" wx:if="{{index < 3}}">
        <view class="rank {{index < 3 ? 'rank-' + (index + 1) : ''}}">{{index + 1}}</view>
        <view class="player-info">
          <text class="player-name">{{item.name}}</text>
          <text class="player-team">{{item.position}}</text>
        </view>
        <view class="goal-count">
          <text class="goals">{{item.goals}}</text>
          <text class="goals-label">球</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 助攻榜TOP3 -->
  <view class="card" wx:if="{{topAssists.length > 0}}">
    <view class="card-header">
      <text class="title">助攻榜 TOP3</text>
      <view class="more" bindtap="goToStats">查看更多 ></view>
    </view>
    <view class="top-scorer-list">
      <view class="scorer-item" wx:for="{{topAssists}}" wx:key="index" wx:if="{{index < 3}}">
        <view class="rank {{index < 3 ? 'rank-' + (index + 1) : ''}}">{{index + 1}}</view>
        <view class="player-info">
          <text class="player-name">{{item.name}}</text>
          <text class="player-team">{{item.position}}</text>
        </view>
        <view class="goal-count">
          <text class="goals">{{item.assists}}</text>
          <text class="goals-label">助攻</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 即将到来的赛程 -->
  <view class="card">
    <view class="card-header">
      <text class="title">即将到来的赛程</text>
      <view class="more" bindtap="goToSchedule">查看日历 ></view>
    </view>
    <view class="schedule-list" wx:if="{{upcomingSchedules.length > 0}}">
      <view class="schedule-item" wx:for="{{upcomingSchedules}}" wx:key="_id" bindtap="goToScheduleDetail" data-id="{{item._id}}">
        <view class="schedule-date">
          <text class="s-day">{{item.day}}</text>
          <text class="s-month">{{item.month}}月</text>
        </view>
        <view class="schedule-info">
          <text class="schedule-title">{{item.title}}</text>
          <text class="schedule-time">{{item.time}}</text>
        </view>
        <view class="schedule-type tag {{item.typeClass}}">{{item.type}}</view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <text>暂无赛程安排</text>
      <button class="btn btn-primary mt-20" bindtap="addSchedule" wx:if="{{isAdmin}}">添加赛程</button>
    </view>
  </view>
</view>
